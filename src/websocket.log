ğŸš€ å¯åŠ¨ Agent WebSocket æœåŠ¡å™¨...
ğŸ“¡ ä½¿ç”¨ Session æ¨¡å¼è¿è¡Œ rootagent
ğŸŒ WebSocket ç«¯ç‚¹: ws://localhost:8000/ws
INFO:     Started server process [62336]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     127.0.0.1:44490 - "WebSocket /ws" [accepted]
INFO:__main__:æ–°ç”¨æˆ·è¿æ¥: user_7ff23e91
INFO:__main__:ä¸ºç”¨æˆ· user_7ff23e91 åˆ›å»ºæ–°ä¼šè¯: bd0f436c-d389-4f3f-a017-a337e7603216
INFO:     connection open
INFO:__main__:Runner åˆå§‹åŒ–å®Œæˆ: bd0f436c-d389-4f3f-a017-a337e7603216
[92m02:24:17 - LiteLLM:INFO[0m: utils.py:3373 - 
LiteLLM completion() model= deepseek-chat; provider = deepseek
INFO:LiteLLM:
LiteLLM completion() model= deepseek-chat; provider = deepseek
INFO:__main__:Received event: Event
INFO:__main__:Total events: 1
INFO:__main__:Sending final response: æˆ‘å¯ä»¥è®¿é—®ä»¥ä¸‹ä¸‰ä¸ªä¸“é—¨çš„å­ä»£ç†ï¼š

1. **pfd_agent** (æˆ‘) - æ ¹åè°ƒå™¨ï¼Œè´Ÿè´£ä»»åŠ¡è§„åˆ’ã€å­ä»£ç†è°ƒåº¦å’Œç»“æœæ•´åˆ

2. **ft_agent** - ä¸“æ³¨äºæœºå™¨å­¦ä¹ åŠ›åœºæ¨¡å‹çš„å¾®è°ƒ/è®­ç»ƒï¼Œå¯ä»¥ï¼š
   - åˆ—å‡ºå¯ç”¨çš„è®­ç»ƒç­–ç•¥
   - æ£€æŸ¥æ•°æ®é›†ï¼ˆå¸§/åŸå­ç»Ÿè®¡ï¼‰
   - ä½¿ç”¨ç”¨æˆ·é…ç½®å¯åŠ¨è®­ç»ƒè¿è¡Œ

3. **expl_agent** - æ¢ç´¢ä»£ç†ï¼Œè´Ÿè´£ï¼š
   - æ•°æ®é›†ç®¡ç†ï¼ˆåŸºäº
[92m02:24:36 - LiteLLM:INFO[0m: utils.py:3373 - 
LiteLLM completion() model= deepseek-chat; provider = deepseek
INFO:LiteLLM:
LiteLLM completion() model= deepseek-chat; provider = deepseek
INFO:__main__:Received event: Event
INFO:__main__:Tool call detected: transfer_to_agent (long_running: False)
INFO:__main__:Received event: Event
INFO:__main__:Tool response received: transfer_to_agent
WARNING:google_adk.google.adk.tools._function_parameter_parse_util:Default value is not supported in function declaration schema for Google AI.
WARNING:google_adk.google.adk.tools._function_parameter_parse_util:Default value is not supported in function declaration schema for Google AI.
WARNING:google_adk.google.adk.tools._function_parameter_parse_util:Default value is not supported in function declaration schema for Google AI.
WARNING:google_adk.google.adk.tools._function_parameter_parse_util:Default value is not supported in function declaration schema for Google AI.
WARNING:google_adk.google.adk.tools._function_parameter_parse_util:Default value is not supported in function declaration schema for Google AI.
WARNING:google_adk.google.adk.tools._function_parameter_parse_util:Default value is not supported in function declaration schema for Google AI.
[92m02:24:38 - LiteLLM:INFO[0m: utils.py:3373 - 
LiteLLM completion() model= deepseek-chat; provider = deepseek
INFO:LiteLLM:
LiteLLM completion() model= deepseek-chat; provider = deepseek
INFO:     127.0.0.1:47318 - "GET /api/files/tree?path=output HTTP/1.1" 200 OK
INFO:     127.0.0.1:47324 - "GET /api/files/tree?path=uploaded_files HTTP/1.1" 200 OK
INFO:__main__:Received event: Event
INFO:__main__:Total events: 3
INFO:__main__:Sending final response: æ‚¨å¥½ï¼æˆ‘æ˜¯ft_agentï¼Œä¸“é—¨è´Ÿè´£æœºå™¨å­¦ä¹ åŠ›åœºæ¨¡å‹çš„å¾®è°ƒå’Œè®­ç»ƒå·¥ä½œã€‚æˆ‘çš„ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š

## ğŸ”§ æ ¸å¿ƒåŠŸèƒ½

**1. è®­ç»ƒç­–ç•¥ç®¡ç†**
- åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„è®­ç»ƒç­–ç•¥ï¼ˆå¦‚DPAã€DeepMDç­‰ï¼‰
- è·å–æ¯ç§ç­–ç•¥çš„è¯¦ç»†è¾“å…¥æ ¼å¼å’Œé…ç½®è¦æ±‚

**2. æ•°æ®æ£€æŸ¥ä¸åˆ†æ**
- æ£€æŸ¥è®­ç»ƒæ•°æ®é›†çš„åŸºæœ¬ç»Ÿè®¡ä¿¡æ¯
- åˆ†æå¸§æ•°ã€å¹³å‡åŸå­æ•°ç­‰å…³é”®æŒ‡æ ‡
- æ”¯æŒè®­ç»ƒ/éªŒè¯/æµ‹è¯•æ•°æ®åˆ†å‰²

**3. è¾“å…¥éªŒè¯**
WARNING:google_adk.google.adk.tools._function_parameter_parse_util:Default value is not supported in function declaration schema for Google AI.
WARNING:google_adk.google.adk.tools._function_parameter_parse_util:Default value is not supported in function declaration schema for Google AI.
WARNING:google_adk.google.adk.tools._function_parameter_parse_util:Default value is not supported in function declaration schema for Google AI.
WARNING:google_adk.google.adk.tools._function_parameter_parse_util:Default value is not supported in function declaration schema for Google AI.
WARNING:google_adk.google.adk.tools._function_parameter_parse_util:Default value is not supported in function declaration schema for Google AI.
WARNING:google_adk.google.adk.tools._function_parameter_parse_util:Default value is not supported in function declaration schema for Google AI.
[92m02:25:01 - LiteLLM:INFO[0m: utils.py:3373 - 
LiteLLM completion() model= deepseek-chat; provider = deepseek
INFO:LiteLLM:
LiteLLM completion() model= deepseek-chat; provider = deepseek
INFO:__main__:Received event: Event
INFO:__main__:Tool call detected: transfer_to_agent (long_running: False)
INFO:__main__:Received event: Event
INFO:__main__:Tool response received: transfer_to_agent
ERROR:__main__:å¤„ç†æ¶ˆæ¯æ—¶å‡ºé”™: 'Context variable not found: `path`.'
Traceback (most recent call last):
  File "/personal/PFD_Agent/src/websocket-server.py", line 503, in process_message
    async for event in runner.run_async(**run_kwargs):
  File "/personal/PFD_Agent/.venv/lib/python3.12/site-packages/google/adk/runners.py", line 314, in run_async
    async for event in agen:
  File "/personal/PFD_Agent/.venv/lib/python3.12/site-packages/google/adk/runners.py", line 310, in _run_with_trace
    async for event in agen:
  File "/personal/PFD_Agent/.venv/lib/python3.12/site-packages/google/adk/runners.py", line 354, in _exec_with_plugin
    async for event in agen:
  File "/personal/PFD_Agent/.venv/lib/python3.12/site-packages/google/adk/runners.py", line 304, in execute
    async for event in agen:
  File "/personal/PFD_Agent/.venv/lib/python3.12/site-packages/google/adk/agents/base_agent.py", line 248, in run_async
    async for event in agen:
  File "/personal/PFD_Agent/.venv/lib/python3.12/site-packages/google/adk/agents/base_agent.py", line 238, in _run_with_trace
    async for event in agen:
  File "/personal/PFD_Agent/.venv/lib/python3.12/site-packages/google/adk/agents/llm_agent.py", line 288, in _run_async_impl
    async for event in agen:
  File "/personal/PFD_Agent/.venv/lib/python3.12/site-packages/google/adk/flows/llm_flows/base_llm_flow.py", line 401, in run_async
    async for event in agen:
  File "/personal/PFD_Agent/.venv/lib/python3.12/site-packages/google/adk/flows/llm_flows/base_llm_flow.py", line 447, in _run_one_step_async
    async for event in agen:
  File "/personal/PFD_Agent/.venv/lib/python3.12/site-packages/google/adk/flows/llm_flows/base_llm_flow.py", line 539, in _postprocess_async
    async for event in agen:
  File "/personal/PFD_Agent/.venv/lib/python3.12/site-packages/google/adk/flows/llm_flows/base_llm_flow.py", line 667, in _postprocess_handle_function_calls_async
    async for event in agen:
  File "/personal/PFD_Agent/.venv/lib/python3.12/site-packages/google/adk/agents/base_agent.py", line 248, in run_async
    async for event in agen:
  File "/personal/PFD_Agent/.venv/lib/python3.12/site-packages/google/adk/agents/base_agent.py", line 238, in _run_with_trace
    async for event in agen:
  File "/personal/PFD_Agent/.venv/lib/python3.12/site-packages/google/adk/agents/llm_agent.py", line 288, in _run_async_impl
    async for event in agen:
  File "/personal/PFD_Agent/.venv/lib/python3.12/site-packages/google/adk/flows/llm_flows/base_llm_flow.py", line 401, in run_async
    async for event in agen:
  File "/personal/PFD_Agent/.venv/lib/python3.12/site-packages/google/adk/flows/llm_flows/base_llm_flow.py", line 420, in _run_one_step_async
    async for event in agen:
  File "/personal/PFD_Agent/.venv/lib/python3.12/site-packages/google/adk/flows/llm_flows/base_llm_flow.py", line 467, in _preprocess_async
    async for event in agen:
  File "/personal/PFD_Agent/.venv/lib/python3.12/site-packages/google/adk/flows/llm_flows/instructions.py", line 76, in run_async
    si = await instructions_utils.inject_session_state(
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/personal/PFD_Agent/.venv/lib/python3.12/site-packages/google/adk/utils/instructions_utils.py", line 124, in inject_session_state
    return await _async_sub(r'{+[^{}]*}+', _replace_match, template)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/personal/PFD_Agent/.venv/lib/python3.12/site-packages/google/adk/utils/instructions_utils.py", line 75, in _async_sub
    replacement = await repl_async_fn(match)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/personal/PFD_Agent/.venv/lib/python3.12/site-packages/google/adk/utils/instructions_utils.py", line 122, in _replace_match
    raise KeyError(f'Context variable not found: `{var_name}`.')
KeyError: 'Context variable not found: `path`.'

INFO:     127.0.0.1:40388 - "GET /api/files/tree?path=output HTTP/1.1" 200 OK
INFO:     127.0.0.1:40394 - "GET /api/files/tree?path=uploaded_files HTTP/1.1" 200 OK
INFO:__main__:ç”¨æˆ·æ–­å¼€è¿æ¥: user_7ff23e91
INFO:     connection closed
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [62336]
